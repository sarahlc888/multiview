# Benchmark configuration for GSM8K arithmetic evaluation
# Goal: Generate 256 triplets and evaluate with 4 methods
run_name: "gsm8k_arithmetic_256_4methods"
logging:
  level: INFO
  output_file: null  # Log to console only
seed: 42
use_cache: true

# Task configuration
tasks:
  defaults:
    max_docs: 20 # 600  # Need more docs than triplets for good sampling
    max_triplets: 2 # 256
    triplet_style: "lm_all"  # Rich annotations (categories + tags + summaries)
    add_synthetic_docs: false

    # Triplet creation parameters for lm_all style
    candidate_strategy: "multi"  # BM25 + embedding + Jaccard
    use_spurious_hard_negs: true
    n_schema_samples: 10

  task_list:
    - document_set: gsm8k
      criterion: arithmetic_operations

# Evaluation methods configuration
methods_to_evaluate:
  # Method 1: BM25 baseline (lexical similarity)
  bm25:
    - name: bm25_lexical

  # Method 2: LM Judge Triplet (Gemini direct comparison)
  lm_judge_triplet:
    - name: gemini_flash_triplet
      preset: lmjudge_triplet_plaintext_binaryhard_gemini

  # Method 3 & 4: Embeddings with/without instructions
  embeddings:
    # WITH instruction prefix (default)
    - name: qwen3_8b_with_instructions
      preset: hf_qwen3_embedding_8b
      # Uses default instruction: "Represent this query for retrieval: "

    # WITHOUT instruction prefix (override to null)
    - name: qwen3_8b_no_instructions
      preset: hf_qwen3_embedding_8b
      preset_overrides:
        embed_query_instr_template: null  # Remove instruction prefix
